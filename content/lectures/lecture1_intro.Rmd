---
title: "ETC1010: Data Modelling and Computing"
subtitle: 'Lecture 1: Introduction'
author: "Di Cook (dicook@monash.edu, @visnut)"
date: "7/25/2017"
output:
  xaringan::moon_reader:
    css: ["default", "myremark.css"]
    self_contained: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r, echo = FALSE, warning = FALSE, message=FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  echo=FALSE,
  comment = "",
  fig.height = 4,
  fig.width = 8,
  fig.align = "center",
  cache = FALSE
)
library(tidyverse)
library(gridExtra)
```

# Welcome to Semester 2 2017!

- __Lecturers__: [Professor Di Cook](http://dicook.org) and [Dr David Frazier](http://monash.edu/research/explore/en/persons/david-frazier(b3a84d85-75f7-4ce8-8732-f7efcc5d772c).html)
- __Tutors__: Puwasala Gamakumara, Mitch O'Hara-Wild, Yeasmin Mahbuba
--

- __Unit guide__: Objectives, tentative schedule, grading
--

- __Textbook__: [R for Data Science](http://r4ds.had.co.nz), Garret Grolemund and Hadley Wickham
--

- __Computing__: R and RStudio
--

- __Materials__: Moodle for grades, online quizzes; [course web site](https://dmac.netlify.com) for lecture and lab materials

---
# Outline

- What is data? 
- What can we do if we have good data handling skills?
    - __Insert lots of examples here__
- Why R?

---
# Music

- Read in a wave file
- Digitise it as time and amplitude
- Plot
- Compare with other sounds

```{r}
library(tuneR)
m1 <- readWave("data/data3.wav")
m1 <- extractWave(m1, from = 25000, to = 75000)
m1_df <- data.frame(t=1:length(m1@left), 
                    left=m1@left, 
                    right=m1@right)
p1 <- ggplot(m1_df, aes(x=t, y=left)) + geom_line() 
m2 <- readWave("data/statistics1.wav")
m2 <- extractWave(m2, from = 25000, to = 75000)
m2_df <- data.frame(t=1:length(m2@left), 
                    left=m2@left, 
                    right=m2@right)
p2 <- ggplot(m2_df, aes(x=t, y=left)) + geom_line()
grid.arrange(p1, p2, ncol=1)
```
---
# Compare left and right channels

```{r}
p1 <- ggplot(m1_df, aes(x=left, y=right)) + 
  geom_point() + theme(aspect.ratio=1)
p2 <- ggplot(m2_df, aes(x=left, y=right)) + 
  geom_point() + theme(aspect.ratio=1)
grid.arrange(p1, p2, ncol=2)
```

Oh, same sound is on both channels! A tad drab.

---
# Compute statistics

```{r}
m1_df <- m1_df %>% gather(channel, value, left, right) %>%
  mutate(word="data")
m2_df <- m2_df %>% gather(channel, value, left, right) %>%
  mutate(word="statistics")
m_df <- bind_rows(m1_df, m2_df)
m_df %>% filter(channel == "left") %>%
  group_by(word) %>%
  summarise(m = mean(value), s = sd(value), 
            mx = max(value), mn = min(value))
```

---
# My music - don't laugh

```{r}
music <- read.csv("data/music-sub.csv", 
                  row.names=1, stringsAsFactors = FALSE)
ggplot(music, aes(x=artist, y=lave)) + geom_boxplot() +
  xlab("") + ylab("Average amplitude")
```

---

```{r fig.height=6, fig.weight=6}
ggplot(music, aes(x=lvar, y=lave, colour=artist)) + 
  geom_point(size=5, alpha=0.5) +
  scale_colour_brewer(palette="Dark2") +
  xlab("Std amplitude") + ylab("Average amplitude") +
  theme(aspect.ratio = 1)
```

Abba is just different from everyone else!

---
# Education

- OECD PISA survey is the world's global metric for quality, equity and efficiency in school education.
- Workforce readiness of 15-year old students
- 14530 students tested in Australia in 2015
- How many schools?
- Math, reading and science tests, surveys on school and home environment, 921 variables
- Data available from 

```{r eval=FALSE}
pisa_2015 <- read_sav(file.choose()) # The SPSS format zip file
pisa_au <- pisa_2015 %>% filter(CNT == "AUS")
save(pisa_au, file="data/pisa_au.rda")
```


---
# Gender differences

```{r}
load("data/pisa_au.rda")
pisa_au <- pisa_au %>% 
  mutate(ST004D01T = factor(ST004D01T, 
                            levels=c(1,2), 
                            labels=c("girls", "boys"))) 
pisa_au %>%
  group_by(ST004D01T) %>%
  summarise(math=weighted.mean(PV1MATH, SENWT), 
            read=weighted.mean(PV1READ, SENWT), 
            sci=weighted.mean(PV1SCIE, SENWT))
p1 <- ggplot(pisa_au, aes(x=ST004D01T, y=PV1MATH, 
                          fill=ST004D01T)) +
  geom_boxplot() + xlab("") + theme(legend.position="none")
p2 <- ggplot(pisa_au, aes(x=ST004D01T, y=PV1READ, 
                          fill=ST004D01T)) +
  geom_boxplot() + xlab("") + theme(legend.position="none")
p3 <- ggplot(pisa_au, aes(x=ST004D01T, y=PV1SCIE, 
                          fill=ST004D01T)) +
  geom_boxplot() + xlab("") + theme(legend.position="none")
grid.arrange(p1, p2, p3, ncol=3)
```

On average reading scores are most different, with girls scoring substantially higher. There is more variability from individual to individual than from boys to girls. 

---
class: inverse middle 
# Your turn

Point out a couple more things that you see in terms of differences between girls and boys?

---
# Tennis

Statistics for grand slam and top tournament matches are available through the ATP and WTA web sites. By web scraping these web sites we can pull data together to explore characteristics of different players, surfaces, ... These are compiled into the R package `deuce`. 

```{r}
# devtools::install_github("skoval/deuce")
library(deuce)
data(wta_matches)
ggplot(filter(wta_matches, tourney_level == "Grand Slams"),
       aes(x=year, y=winner_age)) + 
  geom_point(alpha=0.3) + geom_smooth()
#data(atp_matches)
#ggplot(atp_matches, aes(x=year, y=winner_age)) + 
#  geom_point(alpha=0.3) + geom_smooth()
#wta_matches %>% group_by(tourney_level) %>% tally()
#wta_matches %>% filter(tourney_level == "Grand Slams") %>% select(tourney_name, winner_name, winner_age, year) %>% filter(!is.na(winner_age)) %>% filter(winner_age > 40) %>% arrange(desc(winner_age))
#wta_matches %>% filter(winner_name == "Katerina Bohmova")
```

[Yes, there are 47 year olds playing Grand Slams!](http://www.nytimes.com/2004/06/21/sports/tennis/navratilova-47-wins-at-wimbledon.html)

---
# Politics

---
# Pedestrian sensors

---
# Google maps

---
# Airline traffic

---
# Exchange rates

---
# Text

---
# Climate change

---
# R is ...

* Most commonly used data science software [kdnuggets](http://www.kdnuggets.com/2017/05/poll-analytics-data-science-machine-learning-software-leaders.html)
* __Free__ to use, __open source__ so you can see what code is doing to your data
* __Extensible__: Over 11000 user contributed add-on packages currently on CRAN! Bioconductor has more than 1300 packages, and many researchers provide packages through github.
* __Powerful__: With the right tools, get more work done, faster, better.
* __Flexible__: Not a question of _can_, but _how_.

```{r, eval = FALSE, echo = FALSE}
# devtools::install_github("metacran/crandb")
# pkgs <- crandb::list_packages(limit = 999999)
# length(pkgs)
# [1] 11075
```

---
# RStudio is ...

[From Julie Lowndes](http://jules32.github.io/resources/RStudio_intro/):  

<blockquote>
<b>If R were an airplane, RStudio would be the airport</b>, providing many, many supporting services that make it easier for you, the pilot, to take off and go to awesome places. Sure, you can fly an airplane without an airport, but having those runways and supporting infrastructure is a game-changer.
</blockquote>

---
# The RStudio IDE

- Source editor: Docking station for multiple files, Useful shortcuts ("Knit"), Highlighting/Tab-completion, Code-checking (R, HTML, JS), Debugging features  
- Console window: Highlighting/Tab-completion, Search recent commands
- Other tabs/panes: Graphics, R documentation, Environment pane, File system navigation/access, Tools for package development, git, etc

---
# Installing packages

From CRAN

```{r eval=FALSE}
install.packages("ggenealogy")
```


From bioconductor

```{r eval=FALSE}
source("https://bioconductor.org/biocLite.R")
biocLite("ggbio")
```

From github repos

```{r eval=FALSE}
devtools::install_github("heike/gglogo")
devtools::install_github("haleyjeppson/ggmosaic")
```

---
# What is R Markdown?

From the [R Markdown home page](http://rmarkdown.rstudio.com/):
- R Markdown is an authoring format that enables easy creation of dynamic documents, presentations, and reports from R. 
- It combines the core syntax of __markdown__ (an easy-to-write plain text format) __with embedded R code chunks__ that are run so their output can be included in the final document. 
- R Markdown documents are fully reproducible (they can be automatically regenerated whenever underlying R code or data changes).

---
# Follow along during class

- __These slides__ are made in rmarkdown, using styling from the [xaringan](https://github.com/yihui/xaringan) package. 
- If you download the `Rmd` file of lecture notes ahead of, or during class, you can run the code chunks as I talk and check my calculations or models.


---
# Share and share alike

<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.

