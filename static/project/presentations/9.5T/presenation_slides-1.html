<!DOCTYPE html>
<html>
  <head>
    <title>london Smart Meter Data</title>
    <meta charset="utf-8">
    <meta name="author" content="5T" />
    <link href="presenation_slides-1_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="myremark.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# london Smart Meter Data
### 5T
### Week 12

---





# 1. Data and Questions

## Our Data

- Smart Meter Data from Kaggle
- Records usage information every 30 minutes
- Sends the useage information electronicly to the energy company
- Data only provided for every second day

---
## Data information
- sample of 5567 households in London from November 2011 to February 2014.
The data set contains information on:
-	energy consumption in kWh (per half hour and daily)
-	unique household identifier
-	date and time
-	CACI Acorn group (demographics)
-	weather (hourly and daily):

---

## Data Cleaning

- The half hourly data was provided in 110 seperate csv files
- Each csv file had ~30,000 rows, each with a day of half hourly data
- merge these datasets
- give each half hourly observation its own row and add some information about each hosehold

---

##Data Cleaning

- More than 160,000,000 rows of data
- More than 1.2 Billion observed values 
- Could not save all of the data in one file 
- Four very wealthy, and four disadvantaged households were selected
- Two households on time of use tariffs and two households on standard tariffs


---
## Questions to explore
1. If there are variables which affects energy usage across all ACORN A household's energy consumption. 
2. We wish to look at the specific driving forces behind the energy usage for specific ACORN A households, with a particular emphasis on the type of tariffs charged to each household. 
3. Compare these results to those of another ACORN group.
We have decided to analyse from 4 ACORN A households. Two of which are on a standard tariff and two on a time of use (ToU) tariff.



---
# 3. DATA ANALYSIS



---
# 3. DATA ANALYSIS
## Data visualisation 
### Box plot
---
![](presenation_slides-1_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;
- ToU tariff have a lower median energy consumption; more than 50% of those households consume less than overall average energy consumption
---
### Calendar graphs
---
#### Standard tariff household in ACORN-A
![](presenation_slides-1_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;

---
#### Standard tariff household in ACORN-A
![](presenation_slides-1_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;
---
#### ToU tariff household in ACORN-A
![](presenation_slides-1_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;
---
#### ToU tariff household in ACORN-A
![](presenation_slides-1_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;
---
Standard tariff:
- more electricity usage during winter (Nov - Feb)
ToU tariff:
- difference between summer and winter is not as big. 
- overall less energy consumption
---
Model of time

```r
mod_time &lt;- lm(kwh~time, data1)
tidy(mod_time)
```

```
##          term    estimate    std.error statistic       p.value
## 1 (Intercept) 0.259581786 0.0062191130  41.73936  0.000000e+00
## 2        time 0.007947066 0.0002279837  34.85804 1.099072e-260
```

```r
glance(mod_time)
```

```
##    r.squared adj.r.squared     sigma statistic       p.value df    logLik
## 1 0.04129553    0.04126154 0.5304872  1215.083 1.099072e-260  2 -22144.05
##        AIC      BIC deviance df.residual
## 1 44294.09 44318.84 7938.484       28209
```
Adding time rather than the dummy variable daytime proves to be better, supported by mod_time having a higher r squared value and lower AIC value. Therefore using time alone as a variable is a better option
---
###Trialling with more variables
###Adding interaction terms
#### between day and tariff

```
##                 term      estimate    std.error statistic       p.value
## 1        (Intercept)  1.763471e+01 5.512579e-01  31.98995 1.323932e-220
## 2                day -1.046241e-03 3.472726e-05 -30.12738 2.747040e-196
## 3     LCLidMAC003566 -1.292738e+01 7.860422e-01 -16.44616  1.710205e-60
## 4     LCLidMAC004436 -1.751749e+01 6.457853e-01 -27.12587 5.527879e-160
## 5     LCLidMAC005160 -1.821944e+01 6.785816e-01 -26.84930 8.069218e-157
## 6 day:LCLidMAC003566  7.882368e-04 4.951304e-05  15.91978  8.172790e-57
## 7 day:LCLidMAC004436  1.045184e-03 4.075119e-05  25.64795 1.969939e-143
## 8 day:LCLidMAC005160  1.098046e-03 4.280605e-05  25.65165 1.794866e-143
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1 0.4508418     0.4507055 0.4015388  3307.684       0  8 -14284.51
##        AIC      BIC deviance df.residual
## 1 28587.03 28661.25 4547.265       28203
```
By adding an interaction term we see that r squared has improved but not by a drastic amount, however the model is still inaccurate in explaining the variation in energy comsumption. 

---
###Splitting the day variable into individual components





```r
mod5 &lt;- lm (kwh~Year+Month+Wed+Thu+Fri+Sat+Sun+Mon+Tue+LCLid, data = data3)
glance(mod5)
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1 0.4826413     0.4822375 0.3898434  1195.293       0 23 -13443.12
##        AIC      BIC deviance df.residual
## 1 26934.24 27132.18 4283.952       28188
```
Including weekdays using mutate provides a better model than just using days

---
###Interaction terms

```r
mod6 &lt;- lm (kwh~Year+Month+Sat+Sun+LCLid*time, data = data3)
glance(mod6)
```

```
##   r.squared adj.r.squared    sigma statistic p.value df    logLik      AIC
## 1 0.5406031     0.5402446 0.367357   1507.76       0 23 -11767.08 23582.15
##        BIC deviance df.residual
## 1 23780.09 3804.003       28188
```
It seems intuitive that LCLid will have some correlation with time as households are split into ToU or standard. 
---
###Interaction with Month and Time

```r
mod9 &lt;- lm (kwh~Year+Month+Sat+Sun+time*LCLid + LCLid*Month, data = data3)
glance(mod9)
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1 0.5993301     0.5985474 0.3432748  765.7241       0 56 -9837.773
##        AIC      BIC deviance df.residual
## 1 19789.55 20259.65 3317.718       28155
```

Adding interaction terms not only improves the R squared value but also decreases the AIC. Where increasing regressors are penalised, however still results in a lower AIC hence mod9 the best model by far.

---
###Best Model


```r
mod11 &lt;- lm (kwh~Year+Month+Sat+Sun+time*LCLid + LCLid*Month + LCLid*Year + LCLid*Mon+LCLid*Tue+LCLid*Wed+LCLid*Thu+LCLid*Fri+LCLid*Sat+LCLid*Sun, data = data3)
glance(mod11)
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1 0.6088413      0.607687 0.3393448  527.4683       0 84 -9498.897
##        AIC      BIC deviance df.residual
## 1 19167.79 19868.83 3238.962       28127
```

This accounts for around 60% of the variation within the data by interacting LCLid by each variable related to date.
---


```r
library(broom)
mod11_aug &lt;- augment(mod11, data3)
ggplot(mod11_aug, aes(x=.fitted, y=.std.resid)) + 
  geom_point() 
```

![](presenation_slides-1_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

---
##Comparison between different ACORNS 
---
![](presenation_slides-1_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;
75% of there energy consumption below the overall average energy consumption across the two groups
---
![](presenation_slides-1_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
- ToU tariff consume at least 75% of there energy below the average consumption of ACORN-Q households
- more positively skewed compared to ACORN-A
---

acorn_mod &lt;- lm(kwh~Acorn, data)

```
##           term   estimate   std.error statistic p.value
## 1  (Intercept)  0.4463309 0.002377616 187.72205       0
## 2 AcornACORN-Q -0.2975125 0.003276762 -90.79466       0
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1  0.121551     0.1215363 0.3993475  8243.671       0  2 -29848.98
##        AIC      BIC deviance df.residual
## 1 59703.96 59730.95 9501.245       59577
```
This generally proves that households in ACORN-Q use less energy on average than those in ACORN-A by 0.3 kwh per half hour. 

---
acorn_mod1 &lt;- lm(kwh~Acorn*LCLid, data)

```
##             term    estimate   std.error statistic       p.value
## 1    (Intercept)  0.23429976 0.003598043  65.11867  0.000000e+00
## 2   AcornACORN-Q -0.15221253 0.004799790 -31.71233 7.045056e-219
## 3 LCLidMAC000635  0.10862904 0.004701899  23.10323 1.416598e-117
## 4 LCLidMAC002234  0.09961758 0.005320024  18.72502  5.190021e-78
## 5 LCLidMAC003449  0.79317826 0.005392341 147.09350  0.000000e+00
## 6 LCLidMAC003566  0.37688493 0.005404199  69.73928  0.000000e+00
## 7 LCLidMAC004436 -0.13375083 0.004955260 -26.99169 1.696008e-159
## 8 LCLidMAC005547  0.08286936 0.004724729  17.53950  1.065821e-68
```

```
##   r.squared adj.r.squared     sigma statistic p.value df    logLik
## 1 0.4583876      0.458324 0.3135876  7202.465       0  8 -15442.56
##        AIC      BIC deviance df.residual
## 1 30903.13 30984.08 5858.043       59571
```
---
![](presenation_slides-1_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;
This reinforces the idea that there is larger variation within the electricity usage for Acorn A households, while for Acorn Q, the electricity usage is much lower but much more consistent. 
---
# 4. CONCLUSION

- For ACORN-A households, we can see that the kwh usage can be explained by year, month, days, time and household. 
- This tells us that across each year, month, time and day, all the ACORN A households, on average, will have a change in their electricity usage. 
- More importantly, we can see that the interactions of each household by time, month, year and day and they are significant. 
- This tells us that each household changes their usage based on these variables, which seems intuitive as each household will use their electricity differently during varying times based on their type of tariff and also their personal preferences which can be systematically captured within the LCLid variable.
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
