---
title: "Lab 1"
author: "David T. Frazier"
date: "30/08/2017"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(quantreg)
```
# Linear Optimization

## Question two

A firm called "Clean-Head" produces two products, shampoo and conditioner. Each product is manufactured by a two-step process that involves blending and mixing in machine $A$ and packaging on machine $B$. The same production facilities can be used for both products, thus achieving better utilization of these facilities. The processing times required for shampoo on Machine $A$ and Machine $B$ are 2 and 3 hours respectively. The processing time required for conditioner on Machine $A$ and Machine $B$ are 4 and 2 hours respectively. Usually Machine $A$ can work up to 80 hours a week and Machine $B$ can work up to 60 hours a week.     

You have been called by the CEO to a meeting to discuss how to utilize the available machine time in the most profitable way.

The financial manager has obtained the variable cost and the potential selling price for both products. He estimated that variable cost to produce one bottle of shampoo will cost \$29 and to produce one bottle of conditioner will cost \$40. He also predicted that based on the current market situation, the company will sell the shampoo for \$35 per bottle and the conditioner for \$45 per bottle.   
 
The company's marketing advisor has indicated that the company will not be able to sell more than 16 bottle of shampoo and 18 bottles of conditioner.

The production manager has pointed out that one of the products is more profitable than the other and suggested producing the maximum possible amount of this product within market limitations, using the balance of the capacity to produce the less profitable product.

1.	What will be your advice to the production manager? **ANS**: This stategy will not necessarily maximize rofit because machine time is not accounted for in the proposed decision. 

2.	Formulate this problem in a mathematical way.  (Hint: first calculate the profit for each product.) **ANS**: Profit from shampoo (per bottle): \$6; Profit from conditioner (per bottle): \$5; Define the number of shampoo bottles as S and C for conditioner. Optimization problem
- $\max_{S,C\geq0}6S+5C$
- $2S+4C\leq80$
- $2S+2C\leq 60$
- $S\leq16$
- $C\leq18$



3.	In a few words discuss whether the problem meets all the linear programming modeling assumptions. 
- Proportionality: the contribution to the objective function and the left-hand-side of each constraint by each decision variable is proportional to the value of the decision variable. 
- Additivity: the contribution to the objective function and the left-hand-side of each constraint by any decision variable is completely independent of any other decision variable and additive.
    - No interactions between variables. All constraints and obejctive function are linear. Check. 
- Divisibility: the quantities represented by each decision variable are innately divisible (i.e., fractional answers make sense). 
    - For sake of argument, let's assume that fractional answers are not permitted. Then, we would need to round to the nearest whole solution. Recall that this is referred to as "LP relaxation."
- Certainty: the coefficients in the objective function and constraints are known with certainty. 
    - All the parametess are given as certain figures. Of course, since they are estimated figures there is some uncertainty but we can treat them as "certain" numbers and ignore for now the uncertainty.


4.	Provide a graphical solution to this problem.
- ![](lin_sol1.jpg)
- ![](lin_sol2.jpg)
- The maximum profit will be achieved when the company will produce 10 bottles of shampoo and 15 bottles of conditioner per week. The profit will be \$135.

5.	What will be your advice to the CEO regarding the production amounts of each product? **ANS** The advice will be to produce 10 bottles of shampoo and 15 bottle of conditioner per week. With this production the company will achieve the maximum possible profit of $135. All this is true is the given numbers are correct in particular the demand. We assume here that we will sell all the produced bottles.  

6.	How will you answer change if due to technological improvements the time used on machine A to produce shampoo will decrease from 3 hours to 2 hours? 
- The optimal solution is producing 16 bottles of shampoo and 12 bottle of conditioner. Machine B not be a limit to production anymore. We can for example sell some machinery time to another factory or consider investment to improve Machine A.  
- ![](lin_sol3.jpg)

## Question two

The Happy-Toy company produces toy planes and toy boats. The toy company can sell its planes for \$10 and its boats for \$8 dollars. It cost \$3 in raw materials to make a plane and $2 in raw materials to make a boat. A plane requires 3 hours to make and 1 hour to finish while a boat requires 1 hour to make and 2 hours to finish. The toy company knows it will not sell any more than 35 planes per week. Further, given the number of workers, the company cannot spend any more than 160 hours per week finishing toys and 120 hours per week making toys. The company wishes to maximize the profit it makes choosing how much of each toy to produce.


1. In a few words discuss whether the problem meets all of the linear programming modeling assumptions. 
- The objective function and all the constraints are additive. Also our decision variables, $P$ and $B$ show up onlin learnly in the constraints and objective function. Therefore the first two assumptions (Additivity \& Proportionality) hold. Fractional production does not make sense. Nevertheless, we can pretend that we can do this and solve the linear problem via LP relaxation. Finally all the provided numbers are given as definitive figures without attached uncertainty; i.e., the certainty assumption holds.

2. Formulate a mathematical linear programming model and solve it using a graphical solution.
- $\max_{P,B} 7P+6B$
- $3P+B\leq120$
- $P+2B\leq 160$
- $P\leq35$
- $P,B\geq0$ 
- Can be solved exactly as before. Take the following steps:
    - $3P + B = 120$
    - $P + 2 B = 160$
    - $6P +2P =240$
    - $P + 2 B = 160$
    - $5P = 80 +> P = 16$
    - $B = 120 - 3*16 = 72$

3. Compare your solution with an `R` implementation. 
```{r,echo=TRUE}
library(lpSolve)
obj_fun <- c(7,6)
constr <- matrix(c(3,1,1,2,1,0),ncol = 2, byrow=TRUE)
const_dir <- c("<=","<=","<=","<=")
RHS <- c(120,160,35)
prod_sol <- lp("max",obj_fun,constr,const_dir,RHS)
prod_sol$solution



```
